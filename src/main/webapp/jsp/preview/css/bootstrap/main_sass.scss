/** variables **/

$main-bg: #ffffff;
$text-color: #777777;
$link-color: #007CE7;
$layer-color: $link-color;
$active-color: $link-color;
$link-hover-color: darken($link-color, 15%);

/* size */
$header-height: 40px;

@import "edit_preview_base";
@import "header";
@import "navigation";
@import "components";
//@import "add";
@import "im";
@import "pulse";
@import "mobile";
@import "mobile_preview";
@import "loader";
@import "time";
@import "modal";

#preview_command .nav-tabs>li>a {
	border-radius: 0 !important;
	margin-right: 0 !important;
	color: var(--javlo-ui-btn-text-inactive);
}

#preview_command .nav-tabs>li.active>a {
	color: var(--javlo-ui-btn-text-active) !important;
}

#preview_command .nav>li>a:hover {
	color: var(--javlo-ui-btn-text-active);
}

#preview_command .nav-tabs>li:not(.active)>a:hover {
	border-color: var(--javlo-ui-bg-secondary) !important;
	background-color: var(--javlo-ui-btn-bg-active) !important;
}

#preview_command #shared-content-search-form {
	margin-bottom: var(--javlo-main-separator);
}

html.preview-command-visible.preview-standard {
	margin-top: $header-height !important;
}

html.preview-command-visible.preview-standard.preview-command-visible {
	margin-left: var(--javlo-sidebar-width) !important;
}

html.preview-only.preview-standard.preview-command-visible {
	margin-left: 0 !important;
}

#preview_command .page-shortcut .btn {
	margin-left: 10px !important;
}

.users li:last-child {
	margin-right: 10px !important;
}

#preview_command .btn:hover,
#preview_command .btn:focus {
	border-radius: 5px !important;
	background-color: rgba(0, 0, 0, .2) !important;
	color: var(--javlo-ui-btn-text-active) !important;
	border-radius: 0 !important;
}

body #preview_command .modal-backdrop.in {
  opacity: 0.75;
  filter: alpha(opacity=75);
}

#preview_command li.publish .btn:hover,
#preview_command li.publish .btn:focus {
	background-color: var(--javlo-ui-primary-accent-color-3) !important;
}

#preview_command .btn-primary {
  background-color: var(--action-color);
  color: var(--action-text);
  border-radius: 0 !important;
}

#preview_command .btn-primary:hover {
	background-color: var(--action-color-hover) !important;
	border-radius: 0 !important;
}

#preview_command .disabled .btn:hover {
	background-color: transparent !important;
}

#preview_command {
	font-family: sans-serif;
	-ms-text-size-adjust: 100%;
	-webkit-text-size-adjust: 100%;
	box-sizing: content-box;
	z-index: 11000;

	#preview-modal-frame {
		width: 100%;
	}

	.sidebar {
		._jv_full_height_bottom {
			width: calc(var(--javlo-sidebar-width) - var(--javlo-main-separator));
		}
	}

	.btn {
		&.active {
			background-color: var(--javlo-ui-btn-toggle-bg-active) !important;
			color: white !important;
		}
	}
}

#preview_command .sidebar ._jv_full_height_bottom::-webkit-scrollbar {
	display: none;
	-ms-overflow-style: none;
	/* IE and Edge */
	scrollbar-width: none;
	/* Firefox */
}

#preview_command {
	.form-control.min-width {
		width: 200px;
	}

	.prvCollapse {
		max-height: 800px;
		transition: max-height 1s;
	}

	.hiddenCollapse {
		overflow: hidden;
		max-height: 0;
		transition: max-height 1s;
	}

	.btn-default:hover,
	.btn-default:focus,
	.btn-default.focus,
	.btn-default:active,
	.btn-default.active,
	.open>.dropdown-toggle.btn-default {
		border-color: $active-color;
	}

	.link-wrapper a {
		padding-top: 5px;
	}

	form {
		overflow: hidden;
	}

	h1 {
		font-weight: 400;
		font-size: 1.2em;
		color: #999b98;
		font-family: "Open sans";
	}

	h1 a {
		color: $link-color;
	}

	a {
		color: $link-color;
	}

	a:hover {
		color: $link-hover-color;
	}

	@media (max-width: 1100px) {

		h1,
		.menu .action-title {
			display: none;
		}

		#copy_page .text {
			display: none;
		}

		#paste_page .text {
			display: none;
		}

		.users .text {
			display: none;
		}
	}

	.alert-wrapper {
		position: fixed;
		top: $header-height+15;
		left: 346px;
		z-index: 11020;
	}

	._jv_ajax-loading {
		display: none;
	}

	.sidebar {
		width: var(--javlo-sidebar-width);
		height: 100%;
		position: fixed;
		top: $header-height;
		left: 0;
		box-shadow: 0 3px 3px #333333;
		background-color: #ffffff;
		z-index: 100;
		border-top: none;

		.tab-pane {
			padding: calc(var(--javlo-main-separator) / 2);
		}
	}

	.height-to-bottom {
		overflow-x: hidden;
		overflow-y: auto;
	}

	.sidebar ul {
		display: table;
	}

	.sidebar .nav>li>a {
		// padding: 3px 6px;
		font-size: 0.7rem;
	}

	.tabpanel {
		overflow: auto;
	}

	.navigation .current a {
		font-weight: bold;
	}

	.navigation li {
		margin: 2px;
		padding-left: 10px;
	}

	.navigation li.parent {
		padding-left: 0;
	}

	.preview-form {
		margin-top: 15px;
	}

	.header .navbar {
		height: 42px;
		min-height: 42px;
		background-color: transparent;
		border: 0 none;
	}

	.navbar-brand {
		width: var(--javlo-sidebar-width);
	}

	.header .navbar-nav li input[disabled] {
		color: #dddddd;
	}

	.component {
		cursor: grab;
	}

	#preview-modal,
	#preview-modal-question {
		z-index: 12000;
		overflow: visible;
	}

	iframe {
		border: 0 none;
		max-height: clamp(500px, 100vh, 700px) !important;
	}

	body#main-body .flex-line {
		display: flex !important;
		justify-content: end !important;
		position: fixed !important;
		bottom: 0 !important;
		left: 0 !important;
		background-color: white !important;
		width: 100% !important;
	}

	// @media (max-width: 1600px) {
	// 	iframe {
	// 		height: 500px;
	// 	}
	// }

	.navbar-left {
		width: 100%;
	}

	.settings .btn .glyphicon {
		position: absolute;
		right: 10px;
		top: 50%;
		height: 12px;
		margin-top: -6px;
		color: var(--javlo-ui-text);
	}

	.settings .btn .glyphicon.normal {
		position: static;
		height: auto;
		color: inherit;
		vertical-align: text-bottom;
	}

	.settings .btn:hover .glyphicon {
		color: #777777;
	}

	.first-title {
		margin-top: 0;
	}

	.header .glyphicon,
	#preview_command button .glyphicon {
		margin-right: 3px;
	}

	h2 .glyphicon {
		margin-right: 6px;
	}

	.settings .btn {
		overflow: auto;
		height: auto;
		width: 100%;
		background-color: #F9F9F9;
		color: var(--javlo-ui-text);
		position: relative;
		margin-bottom: 6px;
	}


	.settings .btn:hover {
		background-color: #F9F9F9;
	}

	.btn .label {
		display: block;
		font-size: 11px;
		margin: 10px 0 0 10px;
		padding: 0;
		color: var(--javlo-ui-text);
		text-align: left;
		max-width: 240px;
		line-height: normal;
	}

	.btn .value {
		font-size: 14px;
		color: #777777;
		margin: 0 0 10px 10px;
		max-width: 240px;
		overflow: hidden;
	}

	.thumbnail img {
		width: 100%;
	}

	.thumbnail .caption {
		text-align: center;
		overflow: hidden;
		height: 38px;
		font-size: 0.8em;
		padding: 6px 3px 6px 3px;
		text-overflow: ellipsis;
	}

	.thumbnail.large .caption {
		height: auto;
	}

	.thumbnail .links a {
		text-align: center;
		padding: 3px;
		margin: 0 -4px -4px -4px;
		background-color: #eeeeee;
		border-radius: 0 0 3px 3px;
	}

	.thumbnail .links a:hover {
		background-color: #dddddd;
	}

}

body #preview_command .btn[disabled] {
	color: var(--javlo-ui-btn-text-disabled) !important;
	cursor: none;
}

._preview_ajax-loading #preview_command .logo a {
	display: none;
}

._preview_ajax-loading #preview_command ._jv_ajax-loading {
	display: block;
}

._preview_ajax-loading #preview_command ._jv_ajax-hide-on-loading {
	display: none;
}

._preview_ajax-loading #preview_command .header .navbar-brand {
	display: none;
}

._preview_ajax-loading #preview_command .header .navbar-header {
	background-image: none;
}

div#preview_command {

	h2,
	h2 .glyphicon {
		font-size: 16px;
	}

	h3 .glyphicon {
		font-size: 14px;
	}
}

#preview-layer {
	--layer-border-size: 1px;
	border: var(--layer-border-size) var(--javlo-ui-edit-border) solid;
	background-color: var(--javlo-ui-edit-bg);
	cursor: pointer;
	position: relative;
	min-width: 200px;
	min-height: 15px;

	/** DEBUG **/
	/*display: block !important;
	z-index: 100000000 !important;
	position: absolute !important;
	top: 200px !important;
	left: 500px !important;
	width: 150px !important;
	height: 5px !important;*/

	.preview-layer-wrapper {
		height: 100%;
		display: flex;
		flex-direction: column;
		justify-content: space-between;
	}

	.repeat-icon {
		display: none !important;
	}

	&.repeated .repeat-icon {
		display: none !important;
	}

	.layer-header {
		display: flex;
		justify-content: center;
		align-items: center;
		color: var(--javlo-ui-text);

		h4 {
			padding: 0;
			display: flex;
			font-size: 11px;
			flex-grow: 2;

			.layer-cols {
				margin-left: .5rem;
			}
		}

		.layer-info {
			position: absolute;
			top: 0;
			left: auto;
			right: auto;
			background-color: var(--javlo-layer-color);
			font-size: 11px;
			padding: 6px 12px;
			display: flex;

			i {
				margin-left: .5rem;
				margin-right: .5rem;
			}
		}

		.commands {
			position: absolute;
			bottom: 0;
			left: auto;
			right: auto;
			display: flex;
			border-radius: 0;
			background-color: var(--javlo-layer-color);

			.area-name {
				background-color: var(--javlo-layer-color);
				display: flex;
				font-size: 11px;
				padding: 6px 12px;
				color: var(--javlo-ui-edit-text);

				i {
					margin-right: .25rem;
				}
			}

			.btn {
				border: 0 none;
				border-right: 1px #fff solid;

				background-color: var(--javlo-layer-color);
				display: flex;
				align-items: center;
				border-radius: 0;
				display: flex;
				justify-content: center;

				i {
					margin-right: .25rem;
				}
			}

			.btn-delete {
				border-right: 0 none;
			}

			.btn:hover {
				background-color: white;
				color: var(--javlo-ui-primary-accent-color-3);
			}

			.btn-primary {
				border-color: white !important;
			}
		}
	}

	.main {
		font-size: 2rem;
		display: flex;
		justify-content: center;
		align-items: center;
		height: 100%;

		i {
			margin-top: -28px;
			opacity: .5;
			color: #fff;
		}
	}

	&.small-height {
		.layer-info {
			top: -25px;
		}

		.commands {
			bottom: -28px;
		}
	}

	&.small {

		.layer-info {
			display: block;
			text-align: center;

			#area-name {
				display: inline;
			}
		}

		h4 {
			width: 100%;
			margin-bottom: 3px;
		}

		.main {
			i {
				margin-top: -70px;
			}
		}

		.layer-header {
			padding-top: 3px;
			flex-direction: column;

			.commands {
				.text {
					display: none;
				}
			}
		}
	}
}



.free-edit-zone.open,
._dragover .free-edit-zone {
	display: block;
	border: 1px var(--action-color) solid;
	background-color: var(--javlo-layer-color);
	color: #ffffff;
	text-align: center;
	padding: 5px 0;
	font-size: 11px;
	margin: 2px 0;
	border-radius: 3px;
}

#preview_command .thumbnail {
	cursor: pointer;
}

#preview_command .thumbnail:hover {
	border-color: var(--action-color);
	background-color: #eeeeee;
}

#preview_command .drop-files,
#preview_command #paste {
	margin-top: 20px;
	font-size: 2em;
	color: #B5B5B7;
	min-height: 10px;
	padding: 6px;
}

#preview_command #paste:hover {
	border-color: #c3c3c3;
}

#preview_command .drop-files h3,
#preview_command #paste h3 {
	font-size: 14px;
	margin: 0 0 2px 0;
	color: var(--javlo-ui-btn-text-inactive);
	text-align: center;
}

#preview_command .drop-files .picto,
#preview_command #paste .picto {
	text-align: center;
	margin-top: 5px;
	position: relative;
}

#preview_command #_ep_files {
	width: 100%;

	.well {
		.upload-zone {
			text-align: center;
			
			border: 3px dashed var(--javlo-ui-btn-text-inactive);
			border-radius: 15px;
			padding: 1rem;
		}
		.upload-zone.drop-selected {
			border-color: var(--action-color);
		}
	}
}

#preview_command .drop-files .upload-zone.drop-selected .glyphicon {
	color: #0a0a0a;
}

#preview_command .btn-refresh .glyphicon,
#preview_command .btn-delete .glyphicon {
	margin: 0;
}

#preview_command .btn-refresh .text,
#preview_command .btn-delete .text,
#preview_command .btn-tickets .text,
#preview_command .btn-search .text {
	display: none;
}

#preview_command .header li .inwrapper {
	color: #3b3b3b;
	display: block;
	float: left;
	height: 50px;
	line-height: 50px;
	padding: 0 25px;
	border-bottom: 10px solid transparent;
}

#preview_command .header .menu .action-title.active {
	background-color: #EEEEEE;
}

#preview_command #_ep_new-component-fakefirst {
	display: block;
	background: lighten($link-color, 40%);
	border-radius: 2px;
	min-height: 25px;
	margin: 0;
	border: 1px solid rgba(18, 139, 243, .3);
}

#preview_command ._ep_new-component-zone {
	display: block;
	background: lighten($layer-color, 20%);
	border-radius: 2px;
	min-height: 2px;
	margin: -1 -100px;
	border: 1px solid rgba(18, 139, 243, .3);
}

._ep_new-component-zone {
	height: 0;
	overflow: visible;
	position: relative;

	span {
		position: absolute;
		top: -2px;
		width: 100%;
		min-width: 50px;
		background: #FF003C;
		padding-top: 1px;
		border: 1px solid #ffffff;
		z-index: 999999;
	}
}

#preview_command ._ep_new-component-zone {
	margin: 10px 0;
}

#preview_command .clipboard {
	overflow: hidden;
}

#preview_command button.btn-notext .glyphicon,
#preview_command a.btn-notext .glyphicon {
	margin-right: 0;
}

#preview_command #shared-content-search-form .query {
	width: 50%;
}

.reverselink-info {
	font-size: 0;
}

.reverselink-info .glyphicon {
	font-size: 12px;
	margin-right: 5px;
}

.no-drop {
	cursor: Not-Allowed;
}

#preview_command .disabled .btn {
	color: var(--javlo-ui-btn-text-disabled) !important;
	cursor: default;
}

#preview_command .settings .label {
	margin-left: 0;
}

#preview_command .settings .info {
	position: relative;
	display: block;
	float: none;
	margin: 0 25px 0 0;
	font-size: 0.7em;
	color: #999999;
	overflow: hidden;
	white-space: normal;
	text-align: left;
}

#preview_command .btn-toggle::after {
	display: inline-block;
	margin-left: .255em;
	vertical-align: .255em;
	content: "";
	border-top: .25rem solid;
	border-right: .25rem solid transparent;
	border-bottom: 0;
	border-left: .25rem solid transparent;
}

#preview_command #preview-login-banner {
	position: fixed;
	bottom: 0;
	padding: calc(var(--javlo-main-separator) / 2);
	width: 100%;
	font-size: 14px;
	color: #fff;
	z-index: 999999;
	color: white;

	// background: repeating-linear-gradient(-45deg,
	// 		var(--javlo-ui-color-9),
	// 		var(--javlo-ui-color-9) 10px,
	// 		var(--javlo-ui-color-8) 10px,
	// 		var(--javlo-ui-color-8) 20px);
	background-color: var(--javlo-ui-bg-secondary);

	.preview-login-banner-wrapped {
		display: flex;
		justify-content: space-between;
		align-items: center;
		position: relative;

		span {
			flex-grow: 1;
		}
	}

	button {
		font-size: 20px;
		background-color: transparent;
		border: 0 none;

		span {
			font-size: 12px;
		}

		&:hover {
			opacity: .7;
		}
	}

	.close-preview-banner {
		font-size: 14px;
		color: #fff;
		margin-left: var(--javlo-main-separator);
		transition: opacity .3;

		&:hover {
			opacity: .7;
		}
	}
}

/** modal **/
#preview_command {
	.modal-preview-body {
		background-color: var(--javlo-ui-bg-primary) !important;
	}
}